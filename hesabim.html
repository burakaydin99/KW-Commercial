<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hesabƒ±m - KW Commercial</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/hesabim.css">
    
    <!-- Firebase SDK'sƒ±nƒ± √∂nce y√ºkle -->
    <script src="js/firebase-config.js" type="module"></script>
    <script src="js/auth-service.js" type="module"></script>
    <script src="js/firestore-service.js" type="module"></script>
    <script src="js/user-service.js" type="module"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1><a href="index.html">KW Commercial</a></h1>
            </div>
            <div class="auth-section">
                <button id="loginBtn" class="login-btn">Google ile Giri≈ü Yap</button>
                <div id="userInfo" class="user-info" style="display: none;">
                    <span id="userName" onclick="window.location.href='hesabim.html'" class="user-name-link">Kullanƒ±cƒ±</span>
                    <button id="logoutBtn" class="logout-btn">√áƒ±kƒ±≈ü</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Loading -->
    <div class="loading" id="loadingSpinner">
        <div class="spinner"></div>
        <p>KW Teknoloji | Hesap bilgileri y√ºkleniyor...</p>
    </div>

    <!-- Error Message -->
    <div class="error-message" id="errorMessage" style="display: none;">
        <div class="error-container">
            <h2>Eri≈üim Hatasƒ±</h2>
            <p>Hesap bilgilerinize eri≈ümek i√ßin giri≈ü yapmanƒ±z gerekiyor.</p>
            <button class="login-required-btn" onclick="handleLogin()">
                üîë Google ile Giri≈ü Yap
            </button>
            <button class="back-btn" onclick="goHome()">‚Üê Ana Sayfaya D√∂n</button>
        </div>
    </div>

    <!-- Account Container -->
    <div class="account-container" id="accountContainer" style="display: none;">
        <div class="account-header">
            <div class="profile-info">
                <div class="profile-avatar">
                    <img id="userAvatar" src="" alt="Profil Fotoƒürafƒ±" class="avatar-img">
                    <div class="avatar-fallback" id="avatarFallback">
                        <span id="avatarInitials">KW</span>
                    </div>
                </div>
                <div class="profile-details">
                    <h1 id="displayName" class="profile-name">Kullanƒ±cƒ± Adƒ±</h1>
                    <p id="displayTitle" class="profile-title">KW Commercial</p>
                    <p id="displayEmail" class="profile-email">email@example.com</p>
                </div>
            </div>
            <button class="back-btn" onclick="goHome()">‚Üê Ana Sayfaya D√∂n</button>
        </div>

        <!-- Account Form -->
        <div class="account-form-container">
            <form id="accountForm" class="account-form">
                <div class="form-section">
                    <h3>Ki≈üisel Bilgiler</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fullName">Ad Soyad *</label>
                            <input type="text" id="fullName" name="fullName" required 
                                   placeholder="√ñrn: Burak AYDIN" minlength="2" maxlength="50">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Telefon Numarasƒ±</label>
                            <input type="tel" id="phone" name="phone" 
                                   placeholder="90XXXXXXXXXX" pattern="90[0-9]{10}"
                                   title="T√ºrkiye format: 90XXXXXXXXXX">
                            <small class="phone-help">Format: 90XXXXXXXXXX (WhatsApp i√ßin)</small>
                        </div>

                        <div class="form-group">
                            <label for="regionalOffice">B√∂lge M√ºd√ºrl√ºƒü√º *</label>
                            <select id="regionalOffice" name="regionalOffice" required>
                                <option value="">Se√ßiniz</option>
                                <option value="KW Platin">KW Platin</option>
                                <option value="KW Altƒ±n">KW Altƒ±n</option>
                                <option value="KW G√ºm√º≈ü">KW G√ºm√º≈ü</option>
                                <option value="KW Bronz">KW Bronz</option>
                                <option value="KW Merkez">KW Merkez</option>
                                <option value="KW ƒ∞stanbul">KW ƒ∞stanbul</option>
                                <option value="KW Ankara">KW Ankara</option>
                                <option value="KW ƒ∞zmir">KW ƒ∞zmir</option>
                                <option value="KW Bursa">KW Bursa</option>
                                <option value="KW Antalya">KW Antalya</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="email">E-Mail Adresi</label>
                            <input type="email" id="email" name="email" readonly 
                                   class="readonly-field">
                            <small class="email-help">E-mail adresi Google hesabƒ±nƒ±zdan alƒ±nƒ±r ve deƒüi≈ütirilemez</small>
                        </div>
                    </div>
                </div>

                <!-- Account Stats -->
                <div class="form-section">
                    <h3>Hesap ƒ∞statistikleri</h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üè¢</div>
                            <div class="stat-info">
                                <span class="stat-number" id="totalListings">0</span>
                                <span class="stat-label">Toplam ƒ∞lan</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-info">
                                <span class="stat-number" id="activeListings">0</span>
                                <span class="stat-label">Aktif ƒ∞lan</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üëÅÔ∏è</div>
                            <div class="stat-info">
                                <span class="stat-number" id="totalViews">0</span>
                                <span class="stat-label">Toplam G√∂r√ºnt√ºleme</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-info">
                                <span class="stat-number" id="memberSince">-</span>
                                <span class="stat-label">√úyelik Tarihi</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="goHome()">
                        Ana Sayfaya D√∂n
                    </button>
                    <button type="submit" class="save-btn">
                        üíæ Bilgileri Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase servisleri global olarak eri≈üilebilir yap -->
    <script type="module">
        import { authService } from './js/auth-service.js';
        import { firestoreService } from './js/firestore-service.js';
        import { userService } from './js/user-service.js';
        
        // Global olarak eri≈üilebilir yap
        window.authService = authService;
        window.firestoreService = firestoreService;
        window.userService = userService;
        
        console.log('‚úÖ Firebase servisleri global olarak y√ºklendi');
    </script>

    <!-- Ana JavaScript dosyasƒ±nƒ± y√ºkle -->
    <script src="js/hesabim.js"></script>
</body>
</html>